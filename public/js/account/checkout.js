var checkout={stripe_handler:null,init:function(){checkout.setup(),checkout.events()},setup:function(){checkout.stripe_handler=StripeCheckout.configure({key:$("meta[name=stripe-token]").attr("content"),image:"/images/logo-128.png",local:"auto",token:checkout.actions.stripe_token})},events:function(){$("input[name=amount]").keydown(checkout.actions.amount_input_keydown),$(".checkout").click(checkout.actions.open_stripe),$(window).on("popstate",checkout.actions.page_navigation)},actions:{stripe_token:function(a){$("#checkout-form").find("input[name=token]").val(a.id).end().submit()},amount_input_keydown:function(a){return 13==a.which?(a.preventDefault(),checkout.actions.open_stripe(),!1):void 0},open_stripe:function(a){"undefined"!=typeof a&&a.preventDefault();var b=Math.ceil(parseFloat($("input[name=amount]").val()));(isNaN(b)||1>b)&&(b=20),$("input[name=final-amount]").val(b),checkout.stripe_handler.open({name:"Crafting as a Service",description:"Advanced Crafter Status",bitcoin:!0,email:$("input[name=email]").val(),amount:100*b})},page_navigation:function(){checkout.stripe_handler.close()}}};$(checkout.init);